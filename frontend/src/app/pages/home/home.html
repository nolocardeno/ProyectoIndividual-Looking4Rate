<!-- ============================================ -->
<!-- HOME PAGE - LOOKING4RATE -->
<!-- Página principal para usuarios no logueados -->
<!-- ============================================ -->

<section class="home">
  
  <!-- ============================================ -->
  <!-- HERO SECTION -->
  <!-- ============================================ -->
  @if (isAuthenticated()) {
    <!-- Hero de bienvenida para usuarios autenticados -->
    <section class="hero hero--welcome">
      <header class="hero__content hero__content--welcome">
        <h1 class="hero__text hero__text--welcome">
          Bienvenido de vuelta, <strong>{{ userName() }}</strong>.
          <br>
          Esto es a lo que hemos estado jugando...
        </h1>
      </header>
    </section>
  } @else {
    <!-- Hero original para usuarios no autenticados -->
    <section class="hero">
      <span class="hero__overlay" aria-hidden="true"></span>
      <header class="hero__content">
        <h1 class="hero__text">
          Ten un seguimiento de lo&nbsp;que&nbsp;juegas.
          <br>
          Puntúa y critica tus&nbsp;favoritos.
          <br>
          Cuéntale a los&nbsp;demás qué&nbsp;te&nbsp;gusta.
        </h1>
        <app-button variant="primary" size="lg" (click)="openRegister()">
          Únete a L4R!
        </app-button>
      </header>
    </section>
  }

  <!-- ============================================ -->
  <!-- SECCIÓN: NOVEDADES EN L4R -->
  <!-- ============================================ -->
  <app-featured-section title="NOVEDADES EN L4R" linkRoute="/buscar">
    @if (novedadesLoading()) {
      <aside class="home__loading">
        <app-spinner-inline size="md"></app-spinner-inline>
        <p>Cargando novedades...</p>
      </aside>
    } @else if (novedadesError()) {
      <aside class="home__error">
        <app-alert type="error" [dismissible]="false">
          {{ novedadesError() }}
        </app-alert>
        <app-button variant="secondary" size="sm" (click)="reintentarNovedades()">
          Reintentar
        </app-button>
      </aside>
    } @else {
      <ul class="home__covers">
        @for (juego of novedadesData(); track juego.id) {
          <li class="home__cover-item">
            <app-game-cover 
              [src]="juego.imagenPortada" 
              [alt]="juego.nombre" 
              [routerLink]="'/juego/' + juego.id" 
              size="lg" 
            />
          </li>
        } @empty {
          <p class="home__empty">No hay novedades disponibles</p>
        }
      </ul>
    }
  </app-featured-section>

  <!-- ============================================ -->
  <!-- SECCIÓN: PRÓXIMOS LANZAMIENTOS -->
  <!-- ============================================ -->
  <app-featured-section title="PRÓXIMOS LANZAMIENTOS" linkRoute="/buscar">
    @if (proximosLoading()) {
      <aside class="home__loading">
        <app-spinner-inline size="md"></app-spinner-inline>
        <p>Cargando próximos lanzamientos...</p>
      </aside>
    } @else if (proximosError()) {
      <aside class="home__error">
        <app-alert type="error" [dismissible]="false">
          {{ proximosError() }}
        </app-alert>
        <app-button variant="secondary" size="sm" (click)="reintentarProximos()">
          Reintentar
        </app-button>
      </aside>
    } @else {
      <ul class="home__covers">
        @for (juego of proximosData(); track juego.id) {
          <li class="home__cover-item">
            <app-game-cover 
              [src]="juego.imagenPortada" 
              [alt]="juego.nombre" 
              [routerLink]="'/juego/' + juego.id" 
              size="lg" 
            />
          </li>
        } @empty {
          <p class="home__empty">No hay próximos lanzamientos</p>
        }
      </ul>
    }
  </app-featured-section>

</section>
