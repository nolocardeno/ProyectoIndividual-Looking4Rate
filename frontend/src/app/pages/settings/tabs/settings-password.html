<section class="settings-password">
  <form class="settings-password__form">
    <!-- Campo: Contraseña actual -->
    <fieldset class="settings-password__field">
      <label for="currentPassword" class="settings-password__label">Contraseña actual</label>
      <input
        type="password"
        id="currentPassword"
        name="currentPassword"
        class="settings-password__input"
        [class.settings-password__input--error]="currentPasswordError()"
        placeholder="Introduce tu contraseña actual"
        [value]="formData().currentPassword"
        (input)="updateField('currentPassword', $event)"
        [disabled]="saving()"
      />
      @if (currentPasswordError()) {
        <span class="settings-password__error">{{ currentPasswordError() }}</span>
      }
    </fieldset>

    <!-- Campo: Nueva contraseña -->
    <fieldset class="settings-password__field">
      <label for="newPassword" class="settings-password__label">Nueva contraseña</label>
      <input
        type="password"
        id="newPassword"
        name="newPassword"
        class="settings-password__input"
        placeholder="Mínimo 6 caracteres"
        [value]="formData().newPassword"
        (input)="updateField('newPassword', $event)"
        [disabled]="saving()"
      />
    </fieldset>

    <!-- Campo: Confirmar contraseña -->
    <fieldset class="settings-password__field">
      <label for="confirmPassword" class="settings-password__label">Confirmar contraseña</label>
      <input
        type="password"
        id="confirmPassword"
        name="confirmPassword"
        class="settings-password__input"
        [class.settings-password__input--error]="!passwordsMatch()"
        placeholder="Repite tu nueva contraseña"
        [value]="formData().confirmPassword"
        (input)="updateField('confirmPassword', $event)"
        [disabled]="saving()"
      />
      @if (!passwordsMatch()) {
        <span class="settings-password__error">Las contraseñas no coinciden</span>
      }
    </fieldset>

    <!-- Botón de guardar -->
    <footer class="settings-password__actions">
      <app-button 
        type="button" 
        variant="primary" 
        size="md"
        [disabled]="saving() || !isFormValid()"
        (btnClick)="onSubmit()"
      >
        @if (saving()) {
          Guardando...
        } @else {
          Cambiar contraseña
        }
      </app-button>
    </footer>
  </form>
</section>
