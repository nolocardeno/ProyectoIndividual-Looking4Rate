@if (isOpen) {
  <aside 
    class="review-modal__overlay" 
    (click)="onOverlayClick($event)"
    role="dialog"
    aria-modal="true"
    aria-labelledby="review-modal-title">
    <article 
      #modalContainer
      class="review-modal"
      (click)="onModalClick($event)">
      <header class="review-modal__header">
        <h2 id="review-modal-title" class="review-modal__title">Review de...</h2>
        <button 
          #closeButton
          class="review-modal__close" 
          (click)="closeModal()"
          (keydown)="onCloseKeyDown($event)"
          aria-label="Cerrar modal"
          type="button">
          <fa-icon [icon]="['fas', 'times']"></fa-icon>
        </button>
      </header>

      <section class="review-modal__content">
        <!-- Carátula del juego -->
        <figure class="review-modal__cover-wrapper">
          <app-game-cover
            [src]="gameCover"
            [alt]="gameTitle"
            size="md"
          />
        </figure>

        <!-- Contenido derecho: Título + Textarea -->
        <section class="review-modal__right">
          <!-- Título y año -->
          <header class="review-modal__game-details">
            <h3 class="review-modal__game-title">{{ gameTitle | uppercase }}</h3>
            <span class="review-modal__game-year">{{ gameYear }}</span>
          </header>

          <!-- Formulario de review -->
          <form class="review-modal__form" (ngSubmit)="onSubmit($event)">
            <app-form-textarea
              label=""
              ariaLabel="Escribe tu review del juego"
              name="review"
              placeholder="Añade una review..."
              [value]="reviewText"
              [resizable]="false"
              (valueChange)="reviewText = $event"
            />
          </form>
        </section>
      </section>

      <!-- Botón fuera del área de carátula -->
      <footer class="review-modal__actions">
        <button 
          type="submit" 
          class="review-modal__submit"
          [disabled]="!canSubmit || loading"
          (click)="onSubmit($event)">
          {{ loading ? 'Guardando...' : 'Guardar' }}
        </button>
      </footer>
    </article>
  </aside>
}
